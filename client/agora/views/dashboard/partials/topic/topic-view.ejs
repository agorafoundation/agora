<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('../../../partials/head'); %>
  </head>

    <body class="dashboard-content editor-body">
        <!--File Upload Drop Zone-->
        <!-- <div class="drop-zone"> -->
            <!-- <span class="drop-zone__prompt"></span> -->
            <!-- <input type="file" name="resourceImageField" class="drop-zone__input" /> -->
            
        <div class="topic-body">
            

            <!--Side Nav-->
            <%- include('../../side-menu/editor-side-menu');%> 
            
            <!--Workspace Manager Modal-->
            <%- include('./workspace-manager-modal');%>
            <%- include('./open-topic');%>  

            <!-- Tutorial check -->
            <%- include('./editor-tutorial'); %>

            <%
            if(firstVisit) {
                %>
                <script>
                  document.addEventListener("DOMContentLoaded", function(event) {
                    let myModal = new bootstrap.Modal( document.getElementById( 'editor-tutorial-modal' ), {
                        keyboard: true,
                        backdrop: true
                    } );
                    myModal.show();
                  });
                </script>
                <%
    
              }
            %>

            <div style="display: flex;">
              <!--Workspace Title-->
              <div class="header" id="title-div" style="background-color: #17191a; margin-bottom:0; width: 200%;">
                  <input class="placeholder" id="workspace-title" type="text" placeholder="Untitled">
          
                  <!-- Tags button -->
                  <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#input-modal">
                      Tags
                  </button>
              </div>
          
              <!-- Modal -->
              <div class="modal fade" id="input-modal" tabindex="-1" aria-labelledby="inputModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="inputModalLabel">Tags:</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                      <input type="text" class="form-control" id="mySearch">
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary me-auto" data-bs-dismiss="modal">Close</button>
                      <div id="curr-tags"></div>
                      <div id="new-tag-element" class="tag-list-element">+</div>
                      <ul class="tag-list"></ul>
                    
                    </div>
                  </div>
                </div>

          
          </div>
        <!--More Options-->
        <!-- <i id="ellipsis" class="fa fa-ellipsis-h" onclick="toggleMoreOptions()"></i> -->

                <!--Discussions-->
                <!-- <span class="material-symbols-outlined discussion-button" title="Discussons" data-bs-toggle="modal" data-bs-target="#discussion-modal"  style="color:rgb(255, 255, 255)">
                    forum
                </span> -->

                <!-- Button that triggers the modal -->
                

                <span class="material-symbols-outlined share-button" title="Sharing" data-bs-toggle="modal" data-bs-target="#share-modal"  style="color:rgb(255, 255, 255)">
                  share
                </span>
                <%-include('./discussion-modal'); %>
                <%-include('./comment-template'); %>
                <%-include('./share-modal'); %>
        
        <!-- AI - Agnes with Modal Trigger -->
        <% if( process.env.OPENAI_TOGGLE === 'true' ) { %>
          <div class="agnes-btn-container">
            <span
            class="material-symbols-outlined agnes-button"
            style="color: rgb(250, 246, 246)"
            data-bs-toggle="modal"
            data-bs-target="#agnesModal"

            >
              robot_2
            </span>
          </div>
        <% } %>
        
        <%- include('./agnes-modal'); %>

        <!--Sharing-->
        <!-- URBG TODO: removed until sharing is implemented-->
        <!-- <span class="material-symbols-outlined share-button" title="Share" data-toggle="modal" data-target="#share-modal" style="color:white">
                    ios_share
                </span>
                 <%- include('./share-modal.ejs'); %> -->
      </div>

            <!-- <div class="hidden" id="file-display"> -->
            <!--<%- include('./file-display'); %>-->
            <!-- </div> -->

            <div id="topic-background" style="background-color:#17191a">
                <!-- Tabs -->
                <div class="tabBar" title="Topic name - Long press to edit" style="background-color: #17191a">
                    <span id="new-element" class="material-symbols-outlined" style="color: white">add</span>
                </div>

                <!--Workspace Empty State -->
                <div id="workspace-empty-state">
                    <div class="topic-content" id="topic-editor">
                        <div class="drop-zone" id="drop-zone0">

                            <div class="dropzone-filler"></div>
                            
                                <div id="resources-zone0" class="resources-zone">
                                    <div class="empty-state" id="empty-state0">
                                        <label class="empty-state-text"><h3>Your Workspace is Empty</h3></label>
                                        <label class="empty-state-text">Drop a file or tap the + above to get started!</label>
                                    </div>
                                </div>
                                <input type="file" name="resourceImageField" class="drop-zone__input" />
                            </div>

                        </div>
                    </div>
                </div>
            </div>
             

        </div>
    <!-- </div> -->

    <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes)-->
    <div class="scroll-to-top d-lg-none position-fixed">
      <a
        class="js-scroll-trigger d-block text-center text-white rounded"
        href="#page-top"
        ><i class="fa fa-chevron-up"></i
      ></a>
    </div>

    <%- include('../../../partials/jsincludes'); %>

    <!-- include the JS for editor and agnes -->
    <script type="module" src="/js/editorMain.js"></script>
    <script async type="module" src="/js/agnesAI.js"></script>

    <%- include ('../gallery/dropdown'); %>

    </body>
    
</html>
